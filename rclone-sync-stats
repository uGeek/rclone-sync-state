#!/bin/bash
VERSION="v0.4 20501"


if [ -f  "$HOME/.config/rclonesync/telegram" ]
then
source  ~/.config/rclonesync/telegram
else
echo""
echo "Añade el Token e ID de Telegram, para que te notifique en caso de mala sincronización"
echo "Introduce el comando:"
echo ""
echo -e "\e[3m  rclone-sync-stats t nombre_nube\e[0m"
fi


if [ "$1" = "-h" ] ||  [ "$1" = "--help" ] ||  [ "$1" = "" ]
then
echo "rclone-sync-stat                                                                                                                                                                                                  
                    OPCIÓN             SIGNIFICADO                                                                                                                                                                 
rclone-sync-stat    e  [nube]      ->  Mira si hay un error. En caso que así sea, envia una notificación                                                                                                           
rclone-sync-stat    fs [nube]      ->  First-Sync                                                                                                                                                                  
rclone-sync-stat    n  [nube]      ->  Añade el comando hacia la nube                                                                                                                                              
rclone-sync-stat    l  [logs]      ->  Añade el comando hacia la nube
rclone-sync-stat    t              ->  Añade Token e ID de telegram 
rclone-sync-stat    i              ->  Instalar o actualizar rclonesync. Ejecutar como sudo 
rclone-sync-stat   -h              ->  Ayuda                                                                                                                                                                       
                                                                                                                                                                                                                   
rclone-sync-stat. $VERSION                                                                                                                                                                                                           
"
fi

if [ "$1" = "t" ]
then
echo "Vamos añadir el Token e ID de Telegram donde vas a recibir las notifiaciones"    
echo ""
echo -en " Token: "
read TOKEN
echo -en " ID: "
read ID
echo -en "TOKEN='"$TOKEN"'\nID='"$ID"'" >  ~/.config/rclonesync/telegram
fi

if [ "$1" = "i" ]
then
sudo curl -L https://raw.githubusercontent.com/cjnaz/rclonesync-V2/master/rclonesync.py -o /usr/local/bin/rclonesync && sudo chmod +x /usr/local/bin/rclonesync
echo "actualizado"
exit
fi

